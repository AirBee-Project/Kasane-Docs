# 記法

Kasane では基本的に、IPA の[4 次元時空間情報利活用のための空間 ID ガイドライン](https://www.ipa.go.jp/digital/architecture/guidelines/4dspatio-temporal-guideline.html)に基づき時空間の情報を管理します。

また、下記の一部の記法をガイドラインから拡張し、導入しています。

## 欠けた次元の表現

時空間情報は X,Y,F,T の 4 つの次元で構成されています。このうちどれか 1 つ以上の情報が欠けている場合に`-`を用いてその次元の情報が欠けていることを表現することができます。

例えば人口密度の情報などは高度によらず、一定の値です。下記のように F の値を欠けて表現することでそのデータが全ての F において有効であることを示すことができます。

```
2/1/3/-
```

上記の表現は下記の表現と等価です。

```
2/1/3/-4,2/1/3/-3,2/1/3/-4,2/1/3/-2,2/1/3/-4,2/1/3/-1,2/1/3/-0,2/1/3/1,2/1/3/2,2/1/3/3
```

## 範囲の指定

`:`を用いて範囲を指定することができます。

```
2/1/3/1:5
```

上記の表現は下記の表現と等価です。

```
2/1/3/1,2/1/3/2,2/1/3/3,2/1/3/4,2/1/3/5
```

## 以降全ての値の指定

また、 `-`と`:`を用いて以降全ての値を指定することが可能です。

```
2/1/3/1:-
```

上記の表現は下記の表現と等価です。

```
2/1/3/1,2/1/3/2,2/1/3/3
```

# 演算子

Kasane では下記の演算子を用いて、時空間の範囲を選択することができます。

## AND 演算子を用いた計算

AND 演算子は入力された時空間 ID のうち、物理的な共通範囲を満たす全ての時空間 ID を出力します。

```
AND[2/1/3/0,3/2/6/0] => 3/2/6/0
```

## NOT 演算子を用いた計算

NOT 演算子は入力された時空間 ID が含まれない全ての時空間 ID を出力します。

## OR 演算子を用いた計算

OR 演算子は入力された時空間 ID をそのまま出力します。
